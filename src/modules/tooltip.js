
var __cov_EXqOmEAVSGY3QI_0I_HdDg = (Function('return this'))();
if (!__cov_EXqOmEAVSGY3QI_0I_HdDg.__coverage__) { __cov_EXqOmEAVSGY3QI_0I_HdDg.__coverage__ = {}; }
__cov_EXqOmEAVSGY3QI_0I_HdDg = __cov_EXqOmEAVSGY3QI_0I_HdDg.__coverage__;
if (!(__cov_EXqOmEAVSGY3QI_0I_HdDg['/home/simon/Rails/quill/quill/lib/modules/tooltip.js'])) {
   __cov_EXqOmEAVSGY3QI_0I_HdDg['/home/simon/Rails/quill/quill/lib/modules/tooltip.js'] = {"path":"/home/simon/Rails/quill/quill/lib/modules/tooltip.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":11},"end":{"line":9,"column":22}}},"2":{"name":"Tooltip","line":30,"loc":{"start":{"line":30,"column":2},"end":{"line":30,"column":35}}},"3":{"name":"(anonymous_3)","line":39,"loc":{"start":{"line":39,"column":62},"end":{"line":39,"column":78}}},"4":{"name":"(anonymous_4)","line":40,"loc":{"start":{"line":40,"column":13},"end":{"line":40,"column":37}}},"5":{"name":"(anonymous_5)","line":49,"loc":{"start":{"line":49,"column":34},"end":{"line":49,"column":83}}},"6":{"name":"(anonymous_6)","line":50,"loc":{"start":{"line":50,"column":51},"end":{"line":50,"column":67}}},"7":{"name":"(anonymous_7)","line":51,"loc":{"start":{"line":51,"column":13},"end":{"line":51,"column":29}}},"8":{"name":"(anonymous_8)","line":64,"loc":{"start":{"line":64,"column":27},"end":{"line":64,"column":38}}},"9":{"name":"(anonymous_9)","line":72,"loc":{"start":{"line":72,"column":27},"end":{"line":72,"column":47}}},"10":{"name":"(anonymous_10)","line":84,"loc":{"start":{"line":84,"column":33},"end":{"line":84,"column":44}}},"11":{"name":"(anonymous_11)","line":99,"loc":{"start":{"line":99,"column":29},"end":{"line":99,"column":49}}},"12":{"name":"(anonymous_12)","line":110,"loc":{"start":{"line":110,"column":32},"end":{"line":110,"column":52}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":32}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":22}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":24}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":38}},"5":{"start":{"line":9,"column":0},"end":{"line":130,"column":5}},"6":{"start":{"line":10,"column":2},"end":{"line":26,"column":4}},"7":{"start":{"line":28,"column":2},"end":{"line":28,"column":35}},"8":{"start":{"line":30,"column":2},"end":{"line":47,"column":3}},"9":{"start":{"line":31,"column":4},"end":{"line":31,"column":23}},"10":{"start":{"line":32,"column":4},"end":{"line":32,"column":27}},"11":{"start":{"line":33,"column":4},"end":{"line":33,"column":46}},"12":{"start":{"line":34,"column":4},"end":{"line":34,"column":56}},"13":{"start":{"line":35,"column":4},"end":{"line":35,"column":81}},"14":{"start":{"line":36,"column":4},"end":{"line":36,"column":47}},"15":{"start":{"line":37,"column":4},"end":{"line":37,"column":76}},"16":{"start":{"line":38,"column":4},"end":{"line":38,"column":16}},"17":{"start":{"line":39,"column":4},"end":{"line":46,"column":14}},"18":{"start":{"line":40,"column":6},"end":{"line":45,"column":8}},"19":{"start":{"line":41,"column":8},"end":{"line":44,"column":9}},"20":{"start":{"line":42,"column":10},"end":{"line":42,"column":29}},"21":{"start":{"line":43,"column":10},"end":{"line":43,"column":30}},"22":{"start":{"line":49,"column":2},"end":{"line":62,"column":4}},"23":{"start":{"line":50,"column":4},"end":{"line":61,"column":14}},"24":{"start":{"line":51,"column":6},"end":{"line":60,"column":8}},"25":{"start":{"line":52,"column":8},"end":{"line":59,"column":9}},"26":{"start":{"line":54,"column":12},"end":{"line":54,"column":45}},"27":{"start":{"line":56,"column":12},"end":{"line":56,"column":46}},"28":{"start":{"line":58,"column":12},"end":{"line":58,"column":24}},"29":{"start":{"line":64,"column":2},"end":{"line":70,"column":4}},"30":{"start":{"line":65,"column":4},"end":{"line":65,"column":52}},"31":{"start":{"line":66,"column":4},"end":{"line":68,"column":5}},"32":{"start":{"line":67,"column":6},"end":{"line":67,"column":42}},"33":{"start":{"line":69,"column":4},"end":{"line":69,"column":29}},"34":{"start":{"line":72,"column":2},"end":{"line":82,"column":4}},"35":{"start":{"line":73,"column":4},"end":{"line":73,"column":31}},"36":{"start":{"line":74,"column":4},"end":{"line":74,"column":43}},"37":{"start":{"line":75,"column":4},"end":{"line":75,"column":68}},"38":{"start":{"line":76,"column":4},"end":{"line":76,"column":68}},"39":{"start":{"line":77,"column":4},"end":{"line":77,"column":73}},"40":{"start":{"line":78,"column":4},"end":{"line":78,"column":72}},"41":{"start":{"line":79,"column":4},"end":{"line":79,"column":49}},"42":{"start":{"line":80,"column":4},"end":{"line":80,"column":47}},"43":{"start":{"line":81,"column":4},"end":{"line":81,"column":34}},"44":{"start":{"line":84,"column":2},"end":{"line":97,"column":4}},"45":{"start":{"line":85,"column":4},"end":{"line":85,"column":33}},"46":{"start":{"line":86,"column":4},"end":{"line":86,"column":53}},"47":{"start":{"line":87,"column":4},"end":{"line":87,"column":75}},"48":{"start":{"line":88,"column":4},"end":{"line":88,"column":75}},"49":{"start":{"line":89,"column":4},"end":{"line":96,"column":6}},"50":{"start":{"line":99,"column":2},"end":{"line":108,"column":4}},"51":{"start":{"line":100,"column":4},"end":{"line":100,"column":32}},"52":{"start":{"line":101,"column":4},"end":{"line":101,"column":35}},"53":{"start":{"line":102,"column":4},"end":{"line":102,"column":57}},"54":{"start":{"line":103,"column":4},"end":{"line":103,"column":64}},"55":{"start":{"line":104,"column":4},"end":{"line":104,"column":43}},"56":{"start":{"line":105,"column":4},"end":{"line":105,"column":64}},"57":{"start":{"line":106,"column":4},"end":{"line":106,"column":40}},"58":{"start":{"line":107,"column":4},"end":{"line":107,"column":23}},"59":{"start":{"line":110,"column":2},"end":{"line":126,"column":4}},"60":{"start":{"line":111,"column":4},"end":{"line":111,"column":60}},"61":{"start":{"line":112,"column":4},"end":{"line":112,"column":57}},"62":{"start":{"line":113,"column":4},"end":{"line":113,"column":35}},"63":{"start":{"line":114,"column":4},"end":{"line":124,"column":5}},"64":{"start":{"line":115,"column":6},"end":{"line":115,"column":58}},"65":{"start":{"line":116,"column":6},"end":{"line":116,"column":86}},"66":{"start":{"line":117,"column":6},"end":{"line":117,"column":79}},"67":{"start":{"line":118,"column":6},"end":{"line":120,"column":7}},"68":{"start":{"line":119,"column":8},"end":{"line":119,"column":77}},"69":{"start":{"line":122,"column":6},"end":{"line":122,"column":76}},"70":{"start":{"line":123,"column":6},"end":{"line":123,"column":76}},"71":{"start":{"line":125,"column":4},"end":{"line":125,"column":23}},"72":{"start":{"line":128,"column":2},"end":{"line":128,"column":17}},"73":{"start":{"line":132,"column":0},"end":{"line":132,"column":25}}},"branchMap":{"1":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":41,"column":8}},{"start":{"line":41,"column":8},"end":{"line":41,"column":8}}]},"2":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":12},"end":{"line":41,"column":29}},{"start":{"line":41,"column":33},"end":{"line":41,"column":83}}]},"3":{"line":52,"type":"switch","locations":[{"start":{"line":53,"column":10},"end":{"line":54,"column":45}},{"start":{"line":55,"column":10},"end":{"line":56,"column":46}},{"start":{"line":57,"column":10},"end":{"line":58,"column":24}}]},"4":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":4},"end":{"line":66,"column":4}},{"start":{"line":66,"column":4},"end":{"line":66,"column":4}}]},"5":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":4},"end":{"line":114,"column":4}},{"start":{"line":114,"column":4},"end":{"line":114,"column":4}}]},"6":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":6},"end":{"line":118,"column":6}},{"start":{"line":118,"column":6},"end":{"line":118,"column":6}}]}}};
}
__cov_EXqOmEAVSGY3QI_0I_HdDg = __cov_EXqOmEAVSGY3QI_0I_HdDg['/home/simon/Rails/quill/quill/lib/modules/tooltip.js'];
__cov_EXqOmEAVSGY3QI_0I_HdDg.s['1']++;var DOM,Normalizer,Tooltip,_;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['2']++;_=require('lodash');__cov_EXqOmEAVSGY3QI_0I_HdDg.s['3']++;DOM=require('../dom');__cov_EXqOmEAVSGY3QI_0I_HdDg.s['4']++;Normalizer=require('../normalizer');__cov_EXqOmEAVSGY3QI_0I_HdDg.s['5']++;Tooltip=function(){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['1']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['6']++;Tooltip.DEFAULTS={offset:10,styles:{'.tooltip':{'background-color':'#fff','border':'1px solid #000','top':'0px','white-space':'nowrap','z-index':'2000'},'.tooltip a':{'cursor':'pointer','text-decoration':'none'}},template:''};__cov_EXqOmEAVSGY3QI_0I_HdDg.s['7']++;Tooltip.HIDE_MARGIN='-10000px';function Tooltip(quill,options){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['2']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['9']++;this.quill=quill;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['10']++;this.options=options;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['11']++;this.quill.addStyles(this.options.styles);__cov_EXqOmEAVSGY3QI_0I_HdDg.s['12']++;this.container=this.quill.addContainer('tooltip');__cov_EXqOmEAVSGY3QI_0I_HdDg.s['13']++;this.container.innerHTML=Normalizer.stripWhitespace(this.options.template);__cov_EXqOmEAVSGY3QI_0I_HdDg.s['14']++;this.container.style.position='absolute';__cov_EXqOmEAVSGY3QI_0I_HdDg.s['15']++;DOM.addEventListener(this.quill.root,'focus',_.bind(this.hide,this));__cov_EXqOmEAVSGY3QI_0I_HdDg.s['16']++;this.hide();__cov_EXqOmEAVSGY3QI_0I_HdDg.s['17']++;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(_this){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['3']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['18']++;return function(delta,source){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['4']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['19']++;if((__cov_EXqOmEAVSGY3QI_0I_HdDg.b['2'][0]++,source==='user')&&(__cov_EXqOmEAVSGY3QI_0I_HdDg.b['2'][1]++,_this.container.style.left!==Tooltip.HIDE_MARGIN)){__cov_EXqOmEAVSGY3QI_0I_HdDg.b['1'][0]++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['20']++;_this.range=null;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['21']++;return _this.hide();}else{__cov_EXqOmEAVSGY3QI_0I_HdDg.b['1'][1]++;}};}(this));}__cov_EXqOmEAVSGY3QI_0I_HdDg.s['22']++;Tooltip.prototype.initTextbox=function(textbox,enterCallback,escapeCallback){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['5']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['23']++;return DOM.addEventListener(textbox,'keyup',function(_this){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['6']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['24']++;return function(event){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['7']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['25']++;switch(event.which){case DOM.KEYS.ENTER:__cov_EXqOmEAVSGY3QI_0I_HdDg.b['3'][0]++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['26']++;return enterCallback.call(_this);case DOM.KEYS.ESCAPE:__cov_EXqOmEAVSGY3QI_0I_HdDg.b['3'][1]++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['27']++;return escapeCallback.call(_this);default:__cov_EXqOmEAVSGY3QI_0I_HdDg.b['3'][2]++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['28']++;return true;}};}(this));};__cov_EXqOmEAVSGY3QI_0I_HdDg.s['29']++;Tooltip.prototype.hide=function(){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['8']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['30']++;this.container.style.left=Tooltip.HIDE_MARGIN;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['31']++;if(this.range){__cov_EXqOmEAVSGY3QI_0I_HdDg.b['4'][0]++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['32']++;this.quill.setSelection(this.range);}else{__cov_EXqOmEAVSGY3QI_0I_HdDg.b['4'][1]++;}__cov_EXqOmEAVSGY3QI_0I_HdDg.s['33']++;return this.range=null;};__cov_EXqOmEAVSGY3QI_0I_HdDg.s['34']++;Tooltip.prototype.show=function(reference){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['9']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['35']++;var left,top,_ref,_ref1;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['36']++;this.range=this.quill.getSelection();__cov_EXqOmEAVSGY3QI_0I_HdDg.s['37']++;_ref=this._position(reference),left=_ref[0],top=_ref[1];__cov_EXqOmEAVSGY3QI_0I_HdDg.s['38']++;_ref1=this._limit(left,top),left=_ref1[0],top=_ref1[1];__cov_EXqOmEAVSGY3QI_0I_HdDg.s['39']++;left+=this.quill.root.ownerDocument.defaultView.window.pageXOffset;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['40']++;top+=this.quill.root.ownerDocument.defaultView.window.pageYOffset;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['41']++;this.container.style.left=''+left+'px';__cov_EXqOmEAVSGY3QI_0I_HdDg.s['42']++;this.container.style.top=''+top+'px';__cov_EXqOmEAVSGY3QI_0I_HdDg.s['43']++;return this.container.focus();};__cov_EXqOmEAVSGY3QI_0I_HdDg.s['44']++;Tooltip.prototype._getBounds=function(){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['10']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['45']++;var bounds,scrollX,scrollY;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['46']++;bounds=this.quill.root.getBoundingClientRect();__cov_EXqOmEAVSGY3QI_0I_HdDg.s['47']++;scrollX=this.quill.root.ownerDocument.defaultView.window.pageXOffset;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['48']++;scrollY=this.quill.root.ownerDocument.defaultView.window.pageYOffset;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['49']++;return{left:bounds.left+scrollX,right:bounds.right+scrollX,top:bounds.top+scrollY,bottom:bounds.bottom+scrollY,width:bounds.width,height:bounds.height};};__cov_EXqOmEAVSGY3QI_0I_HdDg.s['50']++;Tooltip.prototype._limit=function(left,top){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['11']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['51']++;var editorRect,toolbarRect;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['52']++;editorRect=this._getBounds();__cov_EXqOmEAVSGY3QI_0I_HdDg.s['53']++;toolbarRect=this.container.getBoundingClientRect();__cov_EXqOmEAVSGY3QI_0I_HdDg.s['54']++;left=Math.min(editorRect.right-toolbarRect.width,left);__cov_EXqOmEAVSGY3QI_0I_HdDg.s['55']++;left=Math.max(editorRect.left,left);__cov_EXqOmEAVSGY3QI_0I_HdDg.s['56']++;top=Math.min(editorRect.bottom-toolbarRect.height,top);__cov_EXqOmEAVSGY3QI_0I_HdDg.s['57']++;top=Math.max(editorRect.top,top);__cov_EXqOmEAVSGY3QI_0I_HdDg.s['58']++;return[left,top];};__cov_EXqOmEAVSGY3QI_0I_HdDg.s['59']++;Tooltip.prototype._position=function(reference){__cov_EXqOmEAVSGY3QI_0I_HdDg.f['12']++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['60']++;var editorRect,left,referenceBounds,toolbarRect,top;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['61']++;toolbarRect=this.container.getBoundingClientRect();__cov_EXqOmEAVSGY3QI_0I_HdDg.s['62']++;editorRect=this._getBounds();__cov_EXqOmEAVSGY3QI_0I_HdDg.s['63']++;if(reference!=null){__cov_EXqOmEAVSGY3QI_0I_HdDg.b['5'][0]++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['64']++;referenceBounds=reference.getBoundingClientRect();__cov_EXqOmEAVSGY3QI_0I_HdDg.s['65']++;left=referenceBounds.left+referenceBounds.width/2-toolbarRect.width/2;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['66']++;top=referenceBounds.top+referenceBounds.height+this.options.offset;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['67']++;if(top+toolbarRect.height>editorRect.bottom){__cov_EXqOmEAVSGY3QI_0I_HdDg.b['6'][0]++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['68']++;top=referenceBounds.top-toolbarRect.height-this.options.offset;}else{__cov_EXqOmEAVSGY3QI_0I_HdDg.b['6'][1]++;}}else{__cov_EXqOmEAVSGY3QI_0I_HdDg.b['5'][1]++;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['69']++;left=editorRect.left+editorRect.width/2-toolbarRect.width/2;__cov_EXqOmEAVSGY3QI_0I_HdDg.s['70']++;top=editorRect.top+editorRect.height/2-toolbarRect.height/2;}__cov_EXqOmEAVSGY3QI_0I_HdDg.s['71']++;return[left,top];};__cov_EXqOmEAVSGY3QI_0I_HdDg.s['72']++;return Tooltip;}();__cov_EXqOmEAVSGY3QI_0I_HdDg.s['73']++;module.exports=Tooltip;
